<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= portefolje.navn %></title>
  <link href="/portefolje.css" rel="stylesheet">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel="stylesheet">
</head>

<body>
<!--Sidemenu navigation-->
  <div class="sidemenu">
    <div class="WebappLogo">
      <img src="/logo.jpeg" alt="WebappLogo">
    </div>

    <button class="pil" onclick="skiftMenu()"> 
      <i class='bx bxs-chevron-left'></i>
    </button>

    <ul class="menuValg">
      <li><a href="/dashboard"><i class='bx bx-home'></i>Dashboard</a></li>
      <li><a href="/kontiOversigt"><i class='bx bxs-user-account'></i>Konti</a>
      <li><a href="/portefoljeOversigt"><i class='bx bx-doughnut-chart'></i>Porteføljer</a></li>
      <li><a href="/indstillinger"><i class='bx bx-cog'></i>Indstillinger</a></li>
    </ul>

    <ul class="logUd">
      <li><a href="/login"><i class='bx bx-log-out'></i>Log ud</a></li>
    </ul>
  </div>

  <!-- Indhold -->
  <div class="indhold">

    <div class="overskrift">
      <h1><%= portefolje.navn %></h1> <!--navnet hentes fra valgt portefølje-->

      <!--søgefelt til at finde værdipapirer-->
      <div class="søgBox">
        <form action="/searchPapir" method="GET" class="søgForm"> <!--sender GET request-->
          <input type="text" name="query" placeholder="Søg efter navn på værdipapir" required> 
          <button type="submit">Søg</button>
        </form>
      </div>
    </div>

    <!--øverste sektion med samlet værdi og oplysninger-->
    <div class="øverste">
      <!--boks der viser porteføljens samlede værdi-->
      <div class="grafboks">
        <h3>Samlet værdi</h3>
        <p><%= portefolje.forventetVærdi.toLocaleString('da-DK', { style: 'currency', currency: 'DKK' }) %></p> <!--viser forvnetet værdi for den valgte portefølje-->
      </div>

    <!--højre side med diagram og oprettelsesdato-->
      <div class="højresideboks">
        <div class="diagramBoks">
          <h3>Fordeling af værdi</h3>
          <p>Diagram kommer...</p>
        </div>

        <div class="højrenedreboks">
          <h3>Dato oprettet</h3>
          <p><%= new Date(portefolje.dato).toLocaleDateString('da-DK') %></p> <!--oprettelsesdato hentes fra valgt portefølje-->
        </div>
      </div>
    </div>


<!--Oversigt over aktier i portefølje-->
<div class="oversigtBox">
  <h3>Aktier i portefølje</h3>
  <div class="listeOverskrifter">
    <span>Aktie Navn</span>
    <span>Antal</span>
    <span>Pris</span>
    <span>Value</span>
  </div>

  <% if (aktier.length > 0) { %>  <!--hvis der findes aktier så vis dem-->
    <% aktier.forEach(a => { %> 
    
      <div class="aktieRække"> 
        <div><%= a.aktieNavn %></div> 
        <div><%= a.antal %></div> 
        <div><%= a.købspris.toFixed(2) %> DKK</div>
        <div><%= a.nuværendeVærdi.toFixed(2) %> DKK</div> 
      </div>
    <% }); %>
  <% } else { %>
    <p>Ingen aktier fundet endnu.</p> <!--hvis ingen aktier findes-->
  <% } %>
</div> 

  <script> //script til åben og lukke side menu
    const sidemenu = document.querySelector('.sidemenu');
    function skiftMenu() {
      sidemenu.classList.toggle('lukket');
    }
  </script>

</body>
</html>
