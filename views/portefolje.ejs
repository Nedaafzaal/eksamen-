<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= portefolje.navn %></title>
  <link href="/portefolje.css" rel="stylesheet">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel="stylesheet">
</head>

<body>
<!--Sidemenu navigation-->
  <div class="sidemenu">
    <div class="WebappLogo">
      <img src="/logo.jpeg" alt="WebappLogo">
    </div>

    <button class="pil" onclick="skiftMenu()"> 
      <i class='bx bxs-chevron-left'></i>
    </button>

    <ul class="menuValg">
      <li><a href="/dashboard"><i class='bx bx-home'></i>Dashboard</a></li>
      <li><a href="/konto/oversigt"><i class='bx bxs-user-account'></i>Konti</a></li>
      <li><a href="/portefolje/oversigt"><i class='bx bx-doughnut-chart'></i>Porteføljer</a></li>
      <li><a href="/indstillinger"><i class='bx bx-cog'></i>Indstillinger</a></li>
    </ul>

    <ul class="logUd">
      <li><a href="/login"><i class='bx bx-log-out'></i>Log ud</a></li>
    </ul>
  </div>

  <!-- Indhold -->
  <div class="indhold">

    <div class="overskrift">
      <h1><%= portefolje.navn %></h1> <!--navnet hentes fra valgt portefølje-->

      <!--søgefelt til at finde værdipapirer-->
      <div class="søgBox">
        <form action="/searchPapir" method="GET" class="søgForm">
          <input type="text" name="query" placeholder="Søg efter navn på værdipapir" required> 
          <button type="submit">Søg</button>
        </form>
      </div>
    </div>

    <!--øverste sektion med samlet værdi og oplysninger-->
    <div class="øverste">
      <!--boks der viser porteføljens samlede værdi-->
      <div class="grafboks">
        <h3>Samlet værdi</h3>
        <% if (værdipapirer.length > 0) { %>
          <p><%= samletVærdi.toLocaleString('da-DK', { style: 'currency', currency: 'DKK' }) %></p>
        <% } else { %>
          <p><em>Ingen værdipapirer i porteføljen endnu</em></p>
        <% } %>
      </div>

      <!--højre side med diagram og oprettelsesdato-->
      <div class="højresideboks">
        <div class="diagramBoks">
          <h3>Fordeling af værdi</h3>
          <p>Diagram kommer...</p>
        </div>

        <div class="højrenedreboks">
          <h3>Dato oprettet</h3>
          <p><%= new Date(portefolje.dato).toLocaleDateString('da-DK') %></p>
        </div>
      </div>
    </div>

    <!--Oversigt over værdipapirer i portefølje-->
    <div class="oversigtBox">
      <h3>Værdipapirer i portefølje</h3>
      <div class="listeOverskrifter">
        <span>Navn</span>
        <span>Antal</span>
        <span>Pris</span>
        <span>Værdi</span>
      </div>

      <% if (værdipapirer.length > 0) { %>
        <% værdipapirer.forEach(p => { %> 
          <div class="aktieRække"> 
            <div><%= p.navn %></div> 
            <div><%= p.antal %></div> 
            <div><%= p.pris.toFixed(2) %> DKK</div>
            <div><%= p.forventetVærdi.toFixed(2) %> DKK</div> 
          </div>
        <% }) %>
      <% } else { %>
        <p><em>Ingen værdipapirer fundet endnu.</em></p>
      <% } %>
    </div> 

    <script>
      const sidemenu = document.querySelector('.sidemenu');
      function skiftMenu() {
        sidemenu.classList.toggle('lukket');
      }
    </script>

  </div>
</body>
</html>
